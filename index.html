<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MiniTube</title>
<style>
/* –ü—Ä–æ—Å—Ç–∏–π, —á–∏—Å—Ç–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è MiniTube. */
body {
  margin: 0;
  font-family: sans-serif;
  background: #f7f7f7;
}
nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #202020;
  color: #fff;
  padding: 10px 20px;
}
nav a {
  color: #fff;
  text-decoration: none;
  margin-right: 15px;
  font-size: 14px;
}
nav a:hover {
  text-decoration: underline;
}
nav .right {
  display: flex;
  align-items: center;
}
#content {
  padding: 20px;
}
.video-card {
  display: flex;
  margin-bottom: 15px;
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  cursor: pointer;
}
.video-card img {
  width: 160px;
  height: 90px;
  object-fit: cover;
}
.video-card .info {
  padding: 10px;
  flex: 1;
}
.video-card .info h3 {
  margin: 0 0 5px;
  font-size: 16px;
  color: #111;
}
.video-card .info p {
  margin: 2px 0;
  font-size: 14px;
  color: #555;
}
.hidden {
  display: none;
}
.button {
  padding: 10px 15px;
  border: none;
  border-radius: 4px;
  background: #1976d2;
  color: #fff;
  cursor: pointer;
  font-size: 14px;
}
.button:hover {
  background: #155a9c;
}
input[type="file"] {
  margin: 10px 0;
}
#video-list {
  display: flex;
  flex-direction: column;
}
.comment {
  background: #fff;
  padding: 10px;
  margin-bottom: 10px;
  border-radius: 6px;
}
.comment .meta {
  font-size: 12px;
  color: #777;
}
.comment .content {
  font-size: 14px;
  color: #333;
  white-space: pre-wrap;
}
textarea {
  width: 100%;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ccc;
  resize: vertical;
  font-family: sans-serif;
}
/* –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ –¥–ª—è –≤—Ö–æ–¥—É —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  z-index: 1000;
}

.modal-content {
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  width: 300px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
}

.modal-content h2 {
  margin-top: 0;
}

.modal-content input[type="email"],
.modal-content input[type="password"],
.modal-content input[type="text"] {
  width: 100%;
  padding: 8px;
  margin: 5px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

.modal-content button {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  border: none;
  border-radius: 4px;
  background: #1976d2;
  color: #fff;
  cursor: pointer;
}

.modal-content button:hover {
  background: #155a9c;
}

/* –ê–≤–∞—Ç–∞—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó */
.avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  margin-right: 10px;
  vertical-align: middle;
}

/* –ê–≤–∞—Ç–∞—Ä–∫–∏ –≤ –∫–∞—Ä—Ç–∫–∞—Ö —ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö */
.card-avatar {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  margin-right: 5px;
  vertical-align: middle;
}

/* –°–µ–∫—Ü—ñ—è –æ—Ü—ñ–Ω–æ–∫ (–ª–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏) */
.rating {
  margin: 10px 0;
}
.rating button {
  margin-right: 10px;
  border: none;
  background: #eee;
  padding: 5px 10px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
}
.rating button.active {
  background: #cce5ff;
}
.rating button:hover {
  background: #ddd;
}

/* –õ—ñ–Ω—ñ—è –∑ –∞–≤—Ç–æ—Ä–æ–º —É –∫–∞—Ä—Ç—Ü—ñ –≤—ñ–¥–µ–æ */
.author-line {
  display: flex;
  align-items: center;
  gap: 5px;
}

</style>
</head>
<body>
<nav>
  <div class="left">
    <a href="#home">–ì–æ–ª–æ–≤–Ω–∞</a>
    <a href="#upload" id="uploadLink" class="hidden">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</a>
    <a href="#" id="myChannelLink" class="hidden">–ú—ñ–π –∫–∞–Ω–∞–ª</a>
  </div>
  <div class="right">
    <img id="userAvatar" class="avatar hidden" src="" alt="Avatar">
    <span id="userDisplay"></span>
    <button id="authButton" class="button">–£–≤—ñ–π—Ç–∏</button>
  </div>
</nav>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –≤—Ö–æ–¥—É -->
  <div id="loginModal" class="modal hidden">
    <div class="modal-content">
      <h2>–£–≤—ñ–π—Ç–∏</h2>
      <input type="email" id="loginEmail" placeholder="–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞" required>
      <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
      <button id="loginSubmit" class="button">–£–≤—ñ–π—Ç–∏</button>
      <p style="margin-top:10px;">–ù–µ–º–∞—î –∞–∫–∞—É–Ω—Ç–∞? <a href="#" id="showRegister">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</a></p>
    </div>
  </div>
  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó -->
  <div id="registerModal" class="modal hidden">
    <div class="modal-content">
      <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
      <input type="text" id="registerName" placeholder="–Ü–º'—è (–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)">
      <input type="email" id="registerEmail" placeholder="–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞ –ø–æ—à—Ç–∞" required>
      <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
      <label style="font-size:12px; margin-top:5px;">–ê–≤–∞—Ç–∞—Ä: <input type="file" id="registerAvatar" accept="image/*"></label>
      <button id="registerSubmit" class="button">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
      <p style="margin-top:10px;">–í–∂–µ –º–∞—î—Ç–µ –∞–∫–∞—É–Ω—Ç? <a href="#" id="showLogin">–£–≤—ñ–π—Ç–∏</a></p>
    </div>
  </div>
<div id="content"></div>

<script type="module">
/*
 * –û—Å–Ω–æ–≤–Ω–∏–π –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π —Å–∫—Ä–∏–ø—Ç MiniTube. –í—Å–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ –¥–ª—è
 * —Å–ø—Ä–æ—â–µ–Ω–Ω—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è. –ü—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó Firebase –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞,
 * —Ç—É—Ç –≤–∫–∞–∑–∞–Ω–æ –∫–æ—Ä–µ–∫—Ç–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –¥–ª—è –ø—Ä–æ—î–∫—Ç—É bone-tube. –í–µ—Ä—Å—ñ—è Firebase SDK ‚Äì 12.1.0.
 */
import { initializeApp } from 'https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js';
import { getAuth, onAuthStateChanged, signOut, createUserWithEmailAndPassword, signInWithEmailAndPassword, updateProfile } from 'https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js';
import {
  getFirestore,
  collection,
  doc,
  getDoc,
  getDocs,
  addDoc,
  setDoc,
  updateDoc,
  query,
  where,
  orderBy,
  serverTimestamp,
  limit,
  increment,
  arrayUnion,
  arrayRemove
} from 'https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js';
import { getStorage, ref, uploadBytes, getDownloadURL } from 'https://www.gstatic.com/firebasejs/12.1.0/firebase-storage.js';
import { getAnalytics } from 'https://www.gstatic.com/firebasejs/12.1.0/firebase-analytics.js';

// –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Firebase, –Ω–∞–¥–∞–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º –¥–ª—è –ø—Ä–æ—î–∫—Ç—É bone-tube.
const firebaseConfig = {
  apiKey: "AIzaSyBN_k0dKVxWutHBIukRlHOv764PV2G0uCw",
  authDomain: "bone-tube.firebaseapp.com",
  projectId: "bone-tube",
  storageBucket: "bone-tube.firebasestorage.app",
  messagingSenderId: "476854769966",
  appId: "1:476854769966:web:e4e4121ac13c096457c2bf",
  measurementId: "G-KJWMF7FFJK"
};

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase
const app = initializeApp(firebaseConfig);
// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ Analytics, —Ö–æ—á–∞ –≤—ñ–Ω –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ
const analytics = getAnalytics(app);
const auth = getAuth(app);
const db = getFirestore(app);
const storage = getStorage(app);

let currentUser = null;
const content = document.getElementById('content');
const authButton = document.getElementById('authButton');
const userDisplay = document.getElementById('userDisplay');
const uploadLink = document.getElementById('uploadLink');
const myChannelLink = document.getElementById('myChannelLink');

// –ï–ª–µ–º–µ–Ω—Ç–∏ –¥–ª—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω —Ç–∞ –∞–≤–∞—Ç–∞—Ä—É
const userAvatarImg = document.getElementById('userAvatar');
const loginModal = document.getElementById('loginModal');
const registerModal = document.getElementById('registerModal');
const loginSubmit = document.getElementById('loginSubmit');
const registerSubmit = document.getElementById('registerSubmit');
const showRegisterLink = document.getElementById('showRegister');
const showLoginLink = document.getElementById('showLogin');

// –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º –º–æ–¥–∞–ª–µ–π
function showLoginModal() {
  loginModal.classList.remove('hidden');
  registerModal.classList.add('hidden');
}
function showRegisterModal() {
  registerModal.classList.remove('hidden');
  loginModal.classList.add('hidden');
}
function hideModals() {
  loginModal.classList.add('hidden');
  registerModal.classList.add('hidden');
}

// –û–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –≤—Ö–æ–¥—É —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
async function loginUser() {
  const email = document.getElementById('loginEmail').value.trim();
  const password = document.getElementById('loginPassword').value;
  if (!email || !password) {
    alert('–í–≤–µ–¥—ñ—Ç—å –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É —ñ –ø–∞—Ä–æ–ª—å');
    return;
  }
  try {
    await signInWithEmailAndPassword(auth, email, password);
    hideModals();
  } catch (err) {
    alert('–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É: ' + err.message);
  }
}

async function registerUser() {
  const email = document.getElementById('registerEmail').value.trim();
  const password = document.getElementById('registerPassword').value;
  const name = document.getElementById('registerName').value.trim();
  const avatarFile = document.getElementById('registerAvatar').files[0];
  if (!email || !password) {
    alert('–í–≤–µ–¥—ñ—Ç—å –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É —ñ –ø–∞—Ä–æ–ª—å');
    return;
  }
  try {
    const userCred = await createUserWithEmailAndPassword(auth, email, password);
    if (name) {
      await updateProfile(userCred.user, { displayName: name });
    }
    let avatarURL = '';
    if (avatarFile) {
      const avatarPath = `avatars/${userCred.user.uid}/${avatarFile.name}`;
      const avatarRef = ref(storage, avatarPath);
      await uploadBytes(avatarRef, avatarFile);
      avatarURL = await getDownloadURL(avatarRef);
      await updateProfile(userCred.user, { photoURL: avatarURL });
    }
    await setDoc(doc(db, 'users', userCred.user.uid), {
      displayName: name || email,
      photoURL: avatarURL,
      email: email,
      createdAt: serverTimestamp(),
      updatedAt: serverTimestamp()
    }, { merge: true });
    hideModals();
  } catch (err) {
    alert('–ü–æ–º–∏–ª–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó: ' + err.message);
  }
}

// –ü—Ä–∏–≤'—è–∑—É—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π –¥–æ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –º–æ–¥–∞–ª–µ–π
if (loginSubmit) {
  loginSubmit.addEventListener('click', (e) => {
    e.preventDefault();
    loginUser();
  });
}
if (registerSubmit) {
  registerSubmit.addEventListener('click', (e) => {
    e.preventDefault();
    registerUser();
  });
}
if (showRegisterLink) {
  showRegisterLink.addEventListener('click', (e) => {
    e.preventDefault();
    showRegisterModal();
  });
}
if (showLoginLink) {
  showLoginLink.addEventListener('click', (e) => {
    e.preventDefault();
    showLoginModal();
  });
}

function signIn() {
  // –ó–∞–ø–∏—Ç—É—î–º–æ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É —Ç–∞ –ø–∞—Ä–æ–ª—å —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
  // –Ω–µ –≤–≤–µ–¥–µ –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É –∞–±–æ –ø–∞—Ä–æ–ª—å ‚Äì –ø—Ä–∏–ø–∏–Ω—è—î–º–æ –ø—Ä–æ—Ü–µ—Å.
  const email = prompt('–í–≤–µ–¥—ñ—Ç—å –≤–∞—à—É –µ–ª–µ–∫—Ç—Ä–æ–Ω–Ω—É –ø–æ—à—Ç—É:');
  if (!email) {
    return;
  }
  const password = prompt('–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å:');
  if (!password) {
    return;
  }
  // –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–º–∞–≥–∞—î–º–æ—Å—è —É–≤—ñ–π—Ç–∏ –∑ –≤–≤–µ–¥–µ–Ω–∏–º–∏ –æ–±–ª—ñ–∫–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  // –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç –∑ —Ü–∏–º–∏ –¥–∞–Ω–∏–º–∏. –¶–µ —Å–ø—Ä–æ—â—É—î
  // –ø—Ä–æ—Ü–µ—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–∫—Ä–µ–º–æ–≥–æ –ø–æ—Ç–æ–∫—É –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
  signInWithEmailAndPassword(auth, email, password).catch((error) => {
    if (error.code === 'auth/user-not-found') {
      createUserWithEmailAndPassword(auth, email, password).catch((err) => {
        alert('–ü–æ–º–∏–ª–∫–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó: ' + err.message);
      });
    } else {
      alert('–ü–æ–º–∏–ª–∫–∞ –≤—Ö–æ–¥—É: ' + error.message);
    }
  });
}

function signOutUser() {
  signOut(auth).catch((error) => {
    alert('–ü–æ–º–∏–ª–∫–∞ –≤–∏—Ö–æ–¥—É: ' + error.message);
  });
}

authButton.addEventListener('click', () => {
  if (currentUser) {
    signOutUser();
  } else {
    // –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –≤—Ö–æ–¥—É –∑–∞–º—ñ—Å—Ç—å prompt
    showLoginModal();
  }
});

myChannelLink.addEventListener('click', (e) => {
  e.preventDefault();
  if (currentUser) {
    window.location.hash = '#channel/' + currentUser.uid;
  }
});

onAuthStateChanged(auth, async (user) => {
  currentUser = user;
  if (user) {
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –ø—Ä–∏ –≤—Ö–æ–¥—ñ
    userDisplay.textContent = user.displayName || user.email;
    authButton.textContent = '–í–∏–π—Ç–∏';
    uploadLink.classList.remove('hidden');
    myChannelLink.classList.remove('hidden');
    // –ü–æ–∫–∞–∑—É—î–º–æ –∞–≤–∞—Ç–∞—Ä —É –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó, —è–∫—â–æ –≤—ñ–Ω —î
    if (user.photoURL) {
      userAvatarImg.src = user.photoURL;
      userAvatarImg.classList.remove('hidden');
    } else {
      userAvatarImg.src = '';
      userAvatarImg.classList.add('hidden');
    }
    // –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É Firestore
    const userRef = doc(db, 'users', user.uid);
    await setDoc(
      userRef,
      {
        displayName: user.displayName || user.email,
        photoURL: user.photoURL || '',
        updatedAt: serverTimestamp()
      },
      { merge: true }
    );
    // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –º–æ–¥–∞–ª—ñ –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤—Ö–æ–¥—É
    hideModals();
  } else {
    userDisplay.textContent = '';
    authButton.textContent = '–£–≤—ñ–π—Ç–∏';
    uploadLink.classList.add('hidden');
    myChannelLink.classList.add('hidden');
    userAvatarImg.classList.add('hidden');
    userAvatarImg.src = '';
    // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –≤—Å—ñ –º–æ–¥–∞–ª—ñ –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ
    hideModals();
  }
  // –©–æ–π–Ω–æ —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑–º—ñ–Ω—é—î—Ç—å—Å—è ‚Äì –≤–∏–∫–æ–Ω—É—î–º–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—é
  route();
});

window.addEventListener('hashchange', () => {
  route();
});

/**
 * –ü—Ä–æ—Å—Ç–∞ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ö–µ—à–∞ URL.
 */
function route() {
  const hash = window.location.hash || '#home';
  if (hash.startsWith('#upload')) {
    showUpload();
  } else if (hash.startsWith('#video/')) {
    const id = hash.split('/')[1];
    showVideo(id);
  } else if (hash.startsWith('#channel/')) {
    const uid = hash.split('/')[1];
    showChannel(uid);
  } else {
    showHome();
  }
}

/**
 * –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑—ñ —Å–ø–∏—Å–∫–æ–º –æ—Å—Ç–∞–Ω–Ω—ñ—Ö –≤—ñ–¥–µ–æ.
 */
async function showHome() {
  content.innerHTML = '<h2>–û—Å—Ç–∞–Ω–Ω—ñ –≤—ñ–¥–µ–æ</h2><div id="video-list"></div>';
  const listElem = document.getElementById('video-list');
  try {
    const q = query(collection(db, 'videos'), orderBy('createdAt', 'desc'), limit(50));
    const snap = await getDocs(q);
    listElem.innerHTML = '';
    snap.forEach((docSnap) => {
      const vid = docSnap.data();
      listElem.appendChild(renderVideoCard(docSnap.id, vid));
    });
  } catch (err) {
    listElem.innerHTML = '<p>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ.</p>';
  }
}

/**
 * –°—Ç–≤–æ—Ä—é—î –µ–ª–µ–º–µ–Ω—Ç –∫–∞—Ä—Ç–∫–∏ –¥–ª—è –≤—ñ–¥–µ–æ.
 * @param {string} id ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤—ñ–¥–µ–æ
 * @param {object} vid –î–∞–Ω—ñ –≤—ñ–¥–µ–æ
 */
function renderVideoCard(id, vid) {
  const div = document.createElement('div');
  div.className = 'video-card';
  div.innerHTML = `
    <img src="${vid.thumbURL}" alt="${vid.title}">
    <div class="info">
      <h3>${vid.title}</h3>
      <div class="author-line">
        ${vid.ownerAvatar ? ('<img src="' + vid.ownerAvatar + '" class="card-avatar">') : ''}<a href="#channel/${vid.ownerUid}">${vid.ownerName || '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á'}</a>
      </div>
      <p>${vid.views || 0} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</p>
    </div>
  `;
  div.addEventListener('click', () => {
    window.location.hash = '#video/' + id;
  });
  return div;
}

/**
 * –ü–æ–∫–∞–∑—É—î —Å—Ç–æ—Ä—ñ–Ω–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ. –î–æ—Å—Ç—É–ø–Ω–∞ –ª–∏—à–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–º.
 */
function showUpload() {
  if (!currentUser) {
    content.innerHTML = '<p>–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–µ–æ.</p>';
    return;
  }
  content.innerHTML = `
    <h2>–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–µ–æ</h2>
    <form id="uploadForm">
      <label>–ù–∞–∑–≤–∞:</label><br>
      <input type="text" id="videoTitle" required><br>
      <label>–û–ø–∏—Å:</label><br>
      <textarea id="videoDesc" rows="3"></textarea><br>
      <label>–í—ñ–¥–µ–æ—Ñ–∞–π–ª (MP4/WebM):</label><br>
      <input type="file" id="videoFile" accept="video/mp4,video/webm" required><br>
      <canvas id="thumbCanvas" width="320" height="180" style="display:none;"></canvas>
      <img id="thumbPreview" src="" alt="–ü—Ä–µ–≤‚Äô—é" style="max-width:320px; display:none; margin-top:10px;"><br>
      <button type="submit" class="button">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</button>
    </form>
  `;
  const fileInput = document.getElementById('videoFile');
  const thumbCanvas = document.getElementById('thumbCanvas');
  const thumbPreview = document.getElementById('thumbPreview');
  let selectedFile;
  fileInput.addEventListener('change', () => {
    selectedFile = fileInput.files[0];
    if (selectedFile) generateThumbnail(selectedFile, thumbCanvas, thumbPreview);
  });
  document.getElementById('uploadForm').addEventListener('submit', (e) => {
    e.preventDefault();
    if (!selectedFile) return;
    uploadVideo(selectedFile, thumbCanvas);
  });
}

/**
 * –ì–µ–Ω–µ—Ä—É—î –ø—Ä–µ–≤‚Äô—é –∑ –≤—ñ–¥–µ–æ—Ñ–∞–π–ª—É, –∑–∞—Ö–æ–ø–ª—é—é—á–∏ –∫–∞–¥—Ä –Ω–∞ —Å–µ—Ä–µ–¥–∏–Ω—ñ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ
 * –∞–±–æ –Ω–∞ 2-–π —Å–µ–∫—É–Ω–¥—ñ, —è–∫—â–æ –≤—ñ–¥–µ–æ –¥–æ–≤—à–µ 4 —Å–µ–∫—É–Ω–¥.
 * @param {File} file –í—ñ–¥–µ–æ—Ñ–∞–π–ª
 * @param {HTMLCanvasElement} canvas –ü–æ–ª–æ—Ç–Ω–æ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
 * @param {HTMLImageElement} previewElem –ï–ª–µ–º–µ–Ω—Ç –¥–ª—è –ø–æ–∫–∞–∑—É –ø—Ä–µ–≤‚Äô—é
 */
function generateThumbnail(file, canvas, previewElem) {
  const url = URL.createObjectURL(file);
  const video = document.createElement('video');
  video.preload = 'metadata';
  video.src = url;
  video.onloadedmetadata = () => {
    // –í–∏–±–∏—Ä–∞—î–º–æ –º–æ–º–µ–Ω—Ç –¥–ª—è –ø—Ä–µ–≤‚Äô—é: —Å–µ—Ä–µ–¥–∏–Ω–∞ –≤—ñ–¥–µ–æ –∞–±–æ 2 —Å–µ–∫—É–Ω–¥–∏, —è–∫—â–æ –∫–æ—Ä–æ—Ç—à–µ
    const seekTime = Math.min(2, video.duration * 0.5);
    video.currentTime = seekTime;
  };
  video.onseeked = () => {
    const ctx = canvas.getContext('2d');
    canvas.width = 320;
    canvas.height = 180;
    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
    const dataURL = canvas.toDataURL('image/jpeg');
    previewElem.src = dataURL;
    previewElem.style.display = 'block';
    URL.revokeObjectURL(url);
  };
}

/**
 * –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î –≤—ñ–¥–µ–æ —Ç–∞ –ø—Ä–µ–≤‚Äô—é —É Firebase Storage —Ç–∞ –¥–æ–¥–∞—î –∑–∞–ø–∏—Å –¥–æ Firestore.
 * @param {File} file –í—ñ–¥–µ–æ—Ñ–∞–π–ª
 * @param {HTMLCanvasElement} canvas –ü–æ–ª–æ—Ç–Ω–æ –∑ –ø—Ä–µ–≤‚Äô—é
 */
async function uploadVideo(file, canvas) {
  if (!currentUser) return;
  const title = document.getElementById('videoTitle').value.trim();
  if (!title) {
    alert('–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –≤—ñ–¥–µ–æ');
    return;
  }
  const desc = document.getElementById('videoDesc').value.trim();
  const timestamp = Date.now();
  const videoPath = `videos/${currentUser.uid}/${timestamp}_${file.name}`;
  const thumbPath = `thumbs/${currentUser.uid}/${timestamp}.jpg`;
  const videoRef = ref(storage, videoPath);
  const thumbRef = ref(storage, thumbPath);
  try {
    // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ
    await uploadBytes(videoRef, file);
    const videoURL = await getDownloadURL(videoRef);
    // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ –ø—Ä–µ–≤‚Äô—é —É Blob —Ç–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ
    const blob = await new Promise((resolve) => canvas.toBlob(resolve, 'image/jpeg', 0.8));
    await uploadBytes(thumbRef, blob);
    const thumbURL = await getDownloadURL(thumbRef);
    // –î–æ–¥–∞—î–º–æ –∑–∞–ø–∏—Å –¥–æ Firestore
    const docRef = await addDoc(collection(db, 'videos'), {
      title,
      description: desc,
      ownerUid: currentUser.uid,
      ownerName: currentUser.displayName || currentUser.email,
      ownerAvatar: currentUser.photoURL || '',
      videoPath,
      videoURL,
      thumbPath,
      thumbURL,
      views: 0,
      likes: [],
      dislikes: [],
      createdAt: serverTimestamp()
    });
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—ñ–¥–µ–æ
    window.location.hash = '#video/' + docRef.id;
  } catch (err) {
    alert('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ: ' + err.message);
  }
}

/**
 * –ü–æ–∫–∞–∑—É—î —Å—Ç–æ—Ä—ñ–Ω–∫—É –ø–µ—Ä–µ–≥–ª—è–¥—É –≤—ñ–¥–µ–æ —Ç–∞ —Å–µ–∫—Ü—ñ—é –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤.
 * @param {string} id ID –≤—ñ–¥–µ–æ
 */
async function showVideo(id) {
  content.innerHTML = '<p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>';
  try {
    const docRef = doc(db, 'videos', id);
    const snap = await getDoc(docRef);
    if (!snap.exists()) {
      content.innerHTML = '<p>–í—ñ–¥–µ–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ.</p>';
      return;
    }
    const vid = snap.data();
    // –Ü–Ω–∫—Ä–µ–º–µ–Ω—Ç—É—î–º–æ –ø–µ—Ä–µ–≥–ª—è–¥–∏
    await updateDoc(docRef, { views: increment(1) });
    // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ –¥–∞–Ω—ñ –≤—ñ–¥–µ–æ
    content.innerHTML = `
      <div>
        <h2>${vid.title}</h2>
        <video id="player" controls style="max-width:100%; background:#000;">
          <source src="${vid.videoURL}" type="video/mp4">
          <source src="${vid.videoURL}" type="video/webm">
        </video>
        <p>
          ${vid.ownerAvatar ? ('<img src="' + vid.ownerAvatar + '" class="card-avatar">') : ''}
          –ê–≤—Ç–æ—Ä: <a href="#channel/${vid.ownerUid}">${vid.ownerName || '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á'}</a>
        </p>
        <p>${(vid.views || 0) + 1} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</p>
        <p>${vid.description || ''}</p>
        <div class="rating">
          <button id="likeBtn">üëç <span id="likeCount">${vid.likes ? vid.likes.length : 0}</span></button>
          <button id="dislikeBtn">üëé <span id="dislikeCount">${vid.dislikes ? vid.dislikes.length : 0}</span></button>
        </div>
        <div id="commentsSection">
          <h3>–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ</h3>
          <div id="commentsList"></div>
          <div id="commentFormContainer"></div>
        </div>
      </div>
    `;
    // –ü—ñ—Å–ª—è –≤—Å—Ç–∞–≤–∫–∏ HTML –¥–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è –æ—Ü—ñ–Ω–æ–∫
    const likeBtn = document.getElementById('likeBtn');
    const dislikeBtn = document.getElementById('dislikeBtn');
    if (likeBtn) {
      if (currentUser && vid.likes && vid.likes.includes(currentUser.uid)) {
        likeBtn.classList.add('active');
      }
      likeBtn.addEventListener('click', () => {
        likeVideo(id, vid);
      });
    }
    if (dislikeBtn) {
      if (currentUser && vid.dislikes && vid.dislikes.includes(currentUser.uid)) {
        dislikeBtn.classList.add('active');
      }
      dislikeBtn.addEventListener('click', () => {
        dislikeVideo(id, vid);
      });
    }
    // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
    loadComments(id);
    // –ü–æ–∫–∞–∑—É—î–º–æ —Ñ–æ—Ä–º—É –∫–æ–º–µ–Ω—Ç–∞—Ä—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö
    if (currentUser) {
      renderCommentForm(id);
    } else {
      document.getElementById('commentFormContainer').innerHTML = '<p>–£–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± –∑–∞–ª–∏—à–∏—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä.</p>';
    }
  } catch (err) {
    content.innerHTML = '<p>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ.</p>';
  }
}

/**
 * –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î —Å–ø–∏—Å–æ–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –¥–æ –≤—ñ–¥–µ–æ.
 * @param {string} videoId ID –≤—ñ–¥–µ–æ
 */
async function loadComments(videoId) {
  const commentsList = document.getElementById('commentsList');
  commentsList.innerHTML = '<p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>';
  try {
    const q = query(
      collection(db, 'videos', videoId, 'comments'),
      orderBy('createdAt', 'asc'),
      limit(100)
    );
    const snap = await getDocs(q);
    commentsList.innerHTML = '';
    snap.forEach((docSnap) => {
      const c = docSnap.data();
      const div = document.createElement('div');
      div.className = 'comment';
      const dateStr = c.createdAt?.toDate().toLocaleString() || '';
      div.innerHTML = `
        <div class="meta">
          ${c.avatarURL ? ('<img src="' + c.avatarURL + '" class="card-avatar">') : ''}
          <strong>${c.userName || '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á'}</strong> - ${dateStr}
        </div>
        <div class="content">${escapeHtml(c.content)}</div>
      `;
      commentsList.appendChild(div);
    });
  } catch (err) {
    commentsList.innerHTML = '<p>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤.</p>';
  }
}

/**
 * –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ñ–æ—Ä–º—É –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–º–µ–Ω—Ç–∞—Ä—è —Ç–∞ –æ–±—Ä–æ–±–ª—è—î –π–æ–≥–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è.
 * @param {string} videoId ID –≤—ñ–¥–µ–æ
 */
function renderCommentForm(videoId) {
  const container = document.getElementById('commentFormContainer');
  container.innerHTML = `
    <form id="commentForm">
      <textarea id="commentText" rows="3" placeholder="–í–∞—à –∫–æ–º–µ–Ω—Ç–∞—Ä" required></textarea>
      <button type="submit" class="button">–ù–∞–¥—ñ—Å–ª–∞—Ç–∏</button>
    </form>
  `;
  document.getElementById('commentForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    const text = document.getElementById('commentText').value.trim();
    if (!text) return;
    try {
      await addDoc(collection(db, 'videos', videoId, 'comments'), {
        userUid: currentUser.uid,
        userName: currentUser.displayName || currentUser.email,
        avatarURL: currentUser.photoURL || '',
        content: text,
        createdAt: serverTimestamp()
      });
      document.getElementById('commentText').value = '';
      loadComments(videoId);
    } catch (err) {
      alert('–ü–æ–º–∏–ª–∫–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è: ' + err.message);
    }
  });
}

/**
 * –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Å—Ç–æ—Ä—ñ–Ω–∫—É –∫–∞–Ω–∞–ª—É —Ç–∞ —Å–ø–∏—Å–æ–∫ –≤—ñ–¥–µ–æ –ø–µ–≤–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
 * @param {string} uid UID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
 */
async function showChannel(uid) {
  content.innerHTML = '<p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>';
  try {
    const userSnap = await getDoc(doc(db, 'users', uid));
    const userData = userSnap.exists() ? userSnap.data() : null;
    const displayName = userData?.displayName || '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á';
    content.innerHTML = `
      <h2>–ö–∞–Ω–∞–ª: ${displayName}</h2>
      ${userData && userData.photoURL ? ('<img src="' + userData.photoURL + '" class="avatar">') : ''}
      <div id="channelVideos"></div>
    `;
    const vidsContainer = document.getElementById('channelVideos');
    vidsContainer.innerHTML = '<p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>';
    const q = query(
      collection(db, 'videos'),
      where('ownerUid', '==', uid),
      orderBy('createdAt', 'desc'),
      limit(50)
    );
    const snap = await getDocs(q);
    vidsContainer.innerHTML = '';
    if (snap.empty) {
      vidsContainer.innerHTML = '<p>–ù–µ–º–∞—î –≤—ñ–¥–µ–æ.</p>';
    } else {
      snap.forEach((docSnap) => {
        const vid = docSnap.data();
        vidsContainer.appendChild(renderVideoCard(docSnap.id, vid));
      });
    }
  } catch (err) {
    content.innerHTML = '<p>–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞–Ω–∞–ª—É.</p>';
  }
}

/**
 * –î–æ–¥–∞—î –∞–±–æ –≤–∏–¥–∞–ª—è—î –ª–∞–π–∫ –¥–ª—è –≤—ñ–¥–µ–æ. –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —É–∂–µ –ø–æ—Å—Ç–∞–≤–∏–≤ –ª–∞–π–∫, —Ç–æ –ª–∞–π–∫ –±—É–¥–µ –∑–Ω—è—Ç–æ.
 * –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ—Å—Ç–∞–≤–∏–≤ –¥–∏–∑–ª–∞–π–∫, –≤—ñ–Ω –±—É–¥–µ –∑–Ω—è—Ç–∏–π —ñ –¥–æ–¥–∞–Ω–∏–π –ª–∞–π–∫.
 * –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—ñ–¥–µ–æ.
 * @param {string} id ID –≤—ñ–¥–µ–æ
 * @param {object} vid –î–∞–Ω—ñ –≤—ñ–¥–µ–æ
 */
async function likeVideo(id, vid) {
  if (!currentUser) {
    alert('–£–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –æ—Ü—ñ–Ω–∫—É');
    return;
  }
  const docRef = doc(db, 'videos', id);
  const uid = currentUser.uid;
  const liked = Array.isArray(vid.likes) && vid.likes.includes(uid);
  const disliked = Array.isArray(vid.dislikes) && vid.dislikes.includes(uid);
  const updates = {};
  if (liked) {
    updates.likes = arrayRemove(uid);
  } else {
    updates.likes = arrayUnion(uid);
    if (disliked) {
      updates.dislikes = arrayRemove(uid);
    }
  }
  await updateDoc(docRef, updates);
  // –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤—ñ–¥–µ–æ, —â–æ–± –æ–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞–Ω
  showVideo(id);
}

/**
 * –î–æ–¥–∞—î –∞–±–æ –≤–∏–¥–∞–ª—è—î –¥–∏–∑–ª–∞–π–∫ –¥–ª—è –≤—ñ–¥–µ–æ. –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –¥–æ likeVideo.
 * @param {string} id ID –≤—ñ–¥–µ–æ
 * @param {object} vid –î–∞–Ω—ñ –≤—ñ–¥–µ–æ
 */
async function dislikeVideo(id, vid) {
  if (!currentUser) {
    alert('–£–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –æ—Ü—ñ–Ω–∫—É');
    return;
  }
  const docRef = doc(db, 'videos', id);
  const uid = currentUser.uid;
  const liked = Array.isArray(vid.likes) && vid.likes.includes(uid);
  const disliked = Array.isArray(vid.dislikes) && vid.dislikes.includes(uid);
  const updates = {};
  if (disliked) {
    updates.dislikes = arrayRemove(uid);
  } else {
    updates.dislikes = arrayUnion(uid);
    if (liked) {
      updates.likes = arrayRemove(uid);
    }
  }
  await updateDoc(docRef, updates);
  showVideo(id);
}

/**
 * –ï–∫—Ä–∞–Ω—É–≤–∞–Ω–Ω—è HTML, —â–æ–± –∑–∞–ø–æ–±—ñ–≥—Ç–∏ XSS —É –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö.
 * @param {string} text
 * @returns {string}
 */
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
route();

</script>
</body>
</html>